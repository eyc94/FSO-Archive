# Rendering a Collection, Modules
- Recap first

## console.log
- Good debugging method.
- Remember not to concatenate. Use the comma to separate.
```javascript
console.log('props value is', props)
```

## Protip: Visual Studio Code Snippets
- Easy to create shortcuts for generating commonly re-used portions of code.
    - Instructions here: `https://code.visualstudio.com/docs/editor/userdefinedsnippets#_creating-your-own-snippets`
- Useful, ready-made snippets can be found as VS Code plugins.
- One for `console.log()` can be made like so:
```
{
    "console.log": {
        "prefix": "clog",
        "body": [
            "console.log('$1')",
        ],
        "description": "Log output to console"
    }
}
```
- Visual Studio Code has a builtin snippet. Type `log` and hit enter.

## JavaScript Arrays
- We will use methods of JavaScript arrays like `find`, `filter`, and `map`.
- Watch these videos for review in this playlist: `https://www.youtube.com/playlist?list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84`
    - Higher-Order Functions: `https://www.youtube.com/watch?v=BMUiFMZr7vk&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84`
    - Map: `https://www.youtube.com/watch?v=bCqtb-Z5YGQ&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=3`
    - Reduce Basics: `https://www.youtube.com/watch?v=Wl98eZpkp-c&t=31s`

## Event Handlers Revisited
- Revisit part 1's review.

## Rendering Collections
- We now do the frontend (browser-side app logic) in React.
- `App.js`:
```javascript
import React from 'react'

const App = (props) => {
    const { notes } = props

    return (
        <div>
            <h1>Notes</h1>
            <ul>
                <li>{notes[0].content}</li>
                <li>{notes[1].content}</li>
                <li>{notes[2].content}</li>
            </ul>
        </div>
    )
}

export default App
```
- `index.js`:
```javascript
import ReactDOM from 'react-dom'
import App from './App'

const notes = [
    {
        id: 1,
        content: 'HTML is easy',
        date: '2019-05-30T17:30:31.098Z',
        important: true
    },
    {
        id: 2,
        content: 'Browser can execute only JavaScript',
        date: '2019-05-30T18:39:34.091Z',
        important: false
    },
    {
        id: 3,
        content: 'GET and POST are the most important methods of HTTP protocol',
        date: '2019-05-30T19:20:14.298Z',
        important: true
    }
]

ReactDOM.render(
    <App notes={notes} />,
    document.getElementById('root')
)
```
- Each note has an id, content in text, date, and whether it's important or not (boolean).
- Notes are referred via hard-coded index number.
- This is not idea or practical. We can generate React elements from the array objects using the `map` function.
```javascript
notes.map(note => <li>{note.content}</li>)
```
- The result is an array of `li` elements.
```javascript
[
    <li>HTML is easy</li>,
    <li>Browser can execute only JavaScript</li>,
    <li>GET and POST are the most important methods of HTTP protocol<li>,
]
```
- These can be placed inside `ul` tags.
```javascript
const App = (props) => {
    const { notes } = props

    return (
        <div>
            <h1>Notes</h1>
            <ul>
                {notes.map(note =>
                    <li>
                        {note.content}
                    </li>
                )}
            </ul>
        </div>
    )
}
```
- Because code generating `li` tags is JavaScript, we have to wrap that in curly braces in a JSX template.

## Key-Attribute
- There is an error in the console saying that "each child in a list should have a unique 'key' prop".
- The elements generated by the `map` method must each have a unique key value: an attribute called `key`.
- Add the keys:
```javascript
const App = (props) => {
    const { notes } = props

    return (
        <div>
            <h1>Notes</h1>
            <ul>
                {notes.map(note =>
                    <li key={note.id}>
                        {note.content}
                    </li>
                )}
            </ul>
        </div>
    )
}
```
- React uses the `key` attributes of objects in an array to determine how to update the view generated by a component when component is re-rendered.

## Map
- Our app contains an array called `notes`.
```javascript
const notes = [
	{
		id: 1,
		content: 'HTML is easy',
		date: '2019-05-30T17:30:31.098Z',
		important: true
	},
	{
		id: 2,
		content: 'Browser can execute only JavaScript',
		date: '2019-05-30T18:39:34.091Z',
		important: false
	},
	{
		id: 3,
		content: 'GET and POST are the most important methods of HTTP protocol',
		date: '2019-05-30T19:20:14.298Z',
		important: true
	}
]
```
- Let's see how `map` works.
- If following code is added to end of file.
```javascript
const result = notes.map(note => note.id)
console.log(result)
```
- `[1, 2, 3]` would be printed to console.
- `map` creates a new array. New elements of array created from original array by `mapping`.
- The function takes a note object as a parameter and returns the value of its `id` field.

## Anti-Pattern: Array Indexes As Keys
- We can bypass the error using array indexes as keys.
- Indexes can be retrieved by passing a second parameter to the callback function of the `map` method.
```javascript
notes.map((note, i) => ...)
```
- `i` is assigned the value of index where `note` resides.
```javascript
<ul>
    {notes.map((note, i) => 
        <li key={i}>
            {note.content}
        </li>
    )}
</ul>
```
- This is **not** recommended.
- Read more about it here: `https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318`

## Refactoring Modules
- Refactor by destructing. We only need the `notes` field of the props.
```javascript
const App = ({ notes }) => {
    return (
        <div>
            <h1>Notes</h1>
            <ul>
                {notes.map(note =>
                    <li key={note.id}>
                        {note.content}
                    </li>
                )}
            </ul>
        </div>
    )
}
```
- Separate displaying note into its own component `Note`.
```javascript
const Note = ({ note }) => {
    return (
        <li>{note.content}</li>
    )
}

const App = ({ notes }) => {
    return (
        <div>
            <h1>Notes</h1>
            <ul>
                {notes.map(note =>
                    <Note key={note.id} note={note} />
                )}
            </ul>
        </div>
    )
}
```
- Now the `key` attribute must be defined for the `Note` component and not the `li` tags.
- We have been writing a whole React app in one file. Not practical.
- Each component should be in their own file.
- Move `Note` component into own module.
- In smaller applications, components are placed in a directory called `components`, which is placed in `src`.
- Convention is to name the file after the component.
- Create a directory called `components` and place a file called `Note.js` in it.
```javascript
import React from 'react'

const Note = ({ note }) => {
    return (
        <li>{note.content}</li>
    )
}

export default Note
```
- This is a React component, so we must import `React`.
- Last line exports the declared module.
- Our `App.js` that uses the component must import the module.
```javascript
import React from 'react'
import Note from './components/Note'

const App = ({ notes }) => {
    // ...
}
```
- Look at branches and code here: `https://github.com/fullstack-hy/part2-notes/tree/part2-1`